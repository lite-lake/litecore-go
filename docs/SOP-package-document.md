# 功能包文档撰写 SOP

## 目的

规范项目各功能包的文档撰写，确保文档风格统一、简明扼要、易于理解。

## 适用范围

适用于 `litecore-go` 项目中所有功能包（package）的文档撰写，包括：
- `doc.go` 文件（包级 Go 文档注释）
- `README.md` 文件（功能包说明文档）

---

## 一、doc.go 撰写规范

### 文件位置

在每个功能包目录下创建 `doc.go` 文件，如 `config/doc.go`、`manager/doc.go`。

### 基本结构

```go
// Package <包名> <一句话功能描述>。
//
// 核心特性：
//   - <特性1>：<简要说明>
//   - <特性2>：<简要说明>
//   - <特性3>：<简要说明>
//
// 基本用法：
//
//	<代码示例>
//
// <可选章节1>：
//
//	<相关说明或示例>
//
// <可选章节2>：
//
//	<相关说明或示例>
package <包名>
```

### 撰写要点

1. **包声明行**
   - 格式：`// Package <包名> <一句话功能描述>。`
   - 描述要简洁明确，说明包的核心功能
   - 示例：`// Package config 提供配置管理功能，支持 JSON 和 YAML 格式。`

2. **核心特性**
   - 使用列表形式列出 3-6 个核心特性
   - 每个特性用简短的描述说明
   - 突出包的优势和特点

3. **基本用法**
   - 提供简单直接的使用示例
   - 从创建/初始化开始，到基本使用
   - 代码使用 Tab 缩进（Go 注释格式）
   - 避免过于复杂的示例

4. **可选章节**
   - 根据包的特性添加必要的说明章节
   - 常见章节：路径语法、配置选项、错误处理、性能考虑等
   - 每个章节都应配有实际示例

5. **代码示例风格**
   - 使用 Tab 缩进（`//` 后跟 Tab）
   - 注释清晰，关键步骤加说明
   - 错误处理要完整（`if err != nil`）

### 示例参考

参考 `config/doc.go` 的完整示例。

---

## 二、README.md 撰写规范

### 文件位置

在每个功能包目录下创建 `README.md` 文件，如 `config/README.md`。

### 基本结构

```markdown
# <模块名>

<一句话功能描述>。

## 特性

- **<特性1>** - <简要说明>
- **<特性2>** - <简要说明>
- **<特性3>** - <简要说明>

## 快速开始

<完整的代码示例，展示主要用法>

## <核心功能1>

<详细说明和示例>

## <核心功能2>

<详细说明和示例>

## API

### <接口/函数分类>

<接口或函数签名及说明>

## <其他章节>

<如：错误处理、性能、最佳实践等>
```

### 撰写要点

1. **标题和描述**
   - 标题使用模块名（可加中文副标题）
   - 第一段用一句话说明模块功能

2. **特性章节**
   - 列出 3-6 个核心特性
   - 使用粗体突出关键词
   - 每个特性用简短的描述说明

3. **快速开始**
   - 提供完整可运行的代码示例
   - 涵盖最常见的使用场景
   - 包含必要的导入和错误处理

4. **功能章节**
   - 对每个核心功能创建独立章节
   - 提供详细的说明和代码示例
   - 展示不同使用场景

5. **API 章节**
   - 按功能分组列出主要 API
   - 包含函数签名和简要说明
   - 对于复杂类型，说明其方法和用法

6. **其他章节**
   - 根据需要添加：错误处理、性能考虑、线程安全、最佳实践等
   - 提供相关的代码示例和说明

### 示例参考

参考 `config/README.md` 的完整示例。

---

## 三、doc.go 与 README.md 的配合

### 内容分工

| 方面 | doc.go | README.md |
|------|--------|-----------|
| **受众** | IDE 用户、godoc 阅读者 | 代码阅读者、使用者 |
| **详细程度** | 简洁，快速上手 | 详细，覆盖全面 |
| **代码示例** | 基本用法 | 多场景示例 |
| **API 文档** | 不列出完整 API | 列出主要 API |

### 内容一致性

- 核心特性描述保持一致
- 代码示例使用相同的风格
- 术语和命名保持统一

---

## 四、文档撰写检查清单

### doc.go 检查清单

- [ ] 包声明行清晰描述功能
- [ ] 列出 3-6 个核心特性
- [ ] 提供基本用法示例
- [ ] 代码使用 Tab 缩进
- [ ] 示例代码可运行（概念上）
- [ ] 包含必要的错误处理
- [ ] 特性章节说明准确

### README.md 检查清单

- [ ] 标题简洁明确
- [ ] 一句话功能描述
- [ ] 特性章节突出重点
- [ ] 快速开始示例完整
- [ ] 核心功能有独立章节
- [ ] API 按功能分组
- [ ] 包含错误处理说明
- [ ] 必要时包含性能/线程安全说明

### 通用检查清单

- [ ] 无错别字
- [ ] 代码示例格式正确
- [ ] 术语使用一致
- [ ] 中文表达简明流畅
- [ ] 无冗余内容
- [ ] 示例代码符合 Go 最佳实践

---

## 五、最佳实践

1. **保持简洁**
   - 文档不是越长越好，突出重点
   - 避免过度解释显而易见的内容

2. **示例优先**
   - 代码示例比文字描述更直观
   - 每个重要功能都应有示例

3. **面向读者**
   - 从使用者的角度组织内容
   - 先展示常用功能，再展示高级特性

4. **及时更新**
   - 代码变更时同步更新文档
   - 删除过时内容，避免误导

5. **保持一致**
   - 与项目其他包的文档风格保持一致
   - 使用统一的术语和命名

---

## 六、常见问题

**Q: doc.go 和 README.md 哪个更重要？**

A: 两者同样重要，服务于不同场景。doc.go 是 Go 生态的标准文档方式，会被 godoc 工具提取；README.md 是项目文档的标准方式，更适合在 GitHub 等平台阅读。

**Q: 是否必须在每个包都创建这两个文件？**

A: 建议所有对外暴露的功能包都创建。内部实现包可以根据需要简化。

**Q: 文档应该用中文还是英文？**

A: 根据项目定位确定。litecore-go 目前使用中文文档，但代码和 API 命名应使用英文。

**Q: 如何处理复杂的示例代码？**

A: 在 README.md 中可以包含较长的示例，doc.go 中保持简洁。复杂示例可以放在单独的 `_test.go` 文件或 `examples/` 目录中。
